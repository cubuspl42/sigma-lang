%val value1 = {
    x4 = {},
    x5 = {
        b = %true,
    },
}

%val value2 = {
    b1 = %false,
    b2 = %true,
    x3 = {},
}

%fun foo ^{arg1: Type1} => %false

%val bar = foo{arg2 = value1}

%val main = %let {
    foo2 = ^{arg3: Type1} => {
        a1 = {},
        a2 = arg3,
    },
    bar3 = foo{arg3 = value2},
    baz = %when (
        %case value2.b1 => foo
        %case value2.b2 => bar
        %case foo{arg2 = {}} => bar
        %else => value1
    ),
} %in baz
